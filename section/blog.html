<div class="container">
  <div class="row">
    <div class="col-lg-12 text-center">
      <h2 class="section-heading text-uppercase">Blog</h2>
      <h3 class="section-subheading text-muted">Thoughts and musings of the Teacher of Great Wisdom</h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 col-sm-6 blog-item">
      <a class="blog-link" data-toggle="modal" href="#blogModal1">
        <div class="blog-hover">
          <div class="blog-hover-content">
            <i class="far fa-eye fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" id="blogImage1" alt="">
      </a>
      <div class="blog-caption" id="blogCaption1">
      </div>
    </div>
    <div class="col-md-4 col-sm-6 blog-item">
      <a class="blog-link" data-toggle="modal" href="#blogModal2">
        <div class="blog-hover">
          <div class="blog-hover-content">
            <i class="far fa-eye fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" id="blogImage2" alt="">
      </a>
      <div class="blog-caption" id="blogCaption2">
      </div>
    </div>
    <div class="col-md-4 col-sm-6 blog-item">
      <a class="blog-link" data-toggle="modal" href="#blogModal3">
        <div class="blog-hover">
          <div class="blog-hover-content">
            <i class="far fa-eye fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" id="blogImage3" alt="">
      </a>
      <div class="blog-caption" id="blogCaption3">
      </div>
    </div>
    <div class="col-lg-12 clearfix blog-paging">
      <a id="newPosts" class="btn btn-primary float-left" href="#blog">&larr; Newer Posts</a>
      <a id="oldPosts" class="btn btn-primary float-right" href="#blog">Older Posts &rarr;</a>
    </div>
  </div>
</div>

<script>
  $(function(){
    loadBlog();
    
    $('#newPosts').on('click', function() {
      var blogs = $('.blog-paging').attr('new');
      loadBlog(blogs, 1);
    });

    $('#oldPosts').on('click', function() {
      var blogs = $('.blog-paging').attr('old');
      loadBlog(blogs, -1);
    });
  });
  
  function loadBlog(blogs = -1, arrow = -1) {
    var total = 7; // Number of blogs published
    var limit = 3; // Number of blogs to display
    var count = '';
    var item = '';
    var arr = [];
    var modal = '';
    var image = '';
    var caption = '';
    var thumb = '';
    var title = '';
    var post = '';
    if (blogs < 0) blogs = total;
    while(arr.length < limit) {
      if (blogs > 0 && blogs <= total) {
        if (arr.indexOf(blogs) === -1) {
          if (arrow < 0) {
            arr.push(blogs);
            if (blogs >= 1) blogs--;
          }
          else {
            arr.unshift(blogs);
            if (blogs < total) blogs++;
          }
        }
      }
      else {
        arr.push(-1);
      }
    }
    $.each(arr, function(index, value) {
      count = (index + 1).toString();
      image = '#blogImage' + count;
      caption = '#blogCaption' + count;
      modal = '#blogModal' + count;
      if (value > 0) {
        item = '0' + value.toString();
        thumb = "img/blog/" + item + "-thumbnail.jpg";
        title = "blog/captions/" + item + "-caption.html";
        post = "blog/posts/" + item + "-post.html";
        $(image).attr('src', thumb);
        $(caption).load(title);
        $(modal).load(post);
        $(caption).parent().show();
      }
      else {
        $(image).removeAttr('src');
        $(caption).parent().hide();
      }
    });
    // Check if there are newer posts
    if (blogs + limit < total) {
      if (arrow > 0) {
        $('.blog-paging').attr('new',blogs);
      }
      else {
        $('.blog-paging').attr('new',blogs + limit);
      }
      $('#newPosts').show();
    }
    else {
      $('#newPosts').hide();
    }
    // Check if there are older posts
    if (blogs > 1) {
      if (arrow < 0) {
        $('.blog-paging').attr('old',blogs);
      }
      else {
        $('.blog-paging').attr('old',blogs - limit);
      }
      $('#oldPosts').show();
    }
    else {
      $('#oldPosts').hide();
    }
  }
</script>
